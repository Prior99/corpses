<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.css" />
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/css/font-awesome.min.css" />
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.0/leaflet.awesome-markers.css" />
	<link rel="stylesheet" href="style/numberedMarkers.css" />
	<link rel="stylesheet"  type="text/less" href="style/style.less" />
	<script src="//cdnjs.cloudflare.com/ajax/libs/less.js/1.7.5/less.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.0/leaflet.awesome-markers.min.js"></script>
	<script src="port.js"></script>
	<script src="js/websocket_client.js"></script>
	<script src="js/client.js"></script>
	<script src="js/login.js"></script>
	<script src="js/map.js"></script>
	<script src="js/interface.js"></script>
	<script src="js/numberedMarkers.js"></script>
	<script type="text/html" id="templatePopup">
		<div class="popup">
			<i class="fa fa-close  close"></i>
			<h1></h1>
			<i class="fa icon"></i>
			<div class="text">
			</div>
		</div>
	</script>
	<script type="text/html" id="templateCreateMarker">
		<h1>Create new marker</h1>
		<table>
			<tr>
				<td>Name:</td>
				<td><input type="text" id="name" /></td>
			</tr>
			<tr>
				<td>Description:</td>
				<td><textarea id="description"></textarea></td>
			</tr>
			<tr>
				<td>Icon:</td>
				<td>
					<select id="icon" style="font-family: 'FontAwesome'; font-size: 14pt;">
						<optgroup label="Loot">
							<option value="trash">				&#xf1f8; Trash					</option>
							<option value="archive">			&#xf187; Chest					</option>
							<option value="globe">				&#xf0ac; Resources				</option>
							<option value="leaf">				&#xf06c; Natural				</option>
							<option value="pagelines">			&#xf18c; Farming				</option>
						<optgroup label="Markers">
							<option value="heart">				&#xf004; Home					</option>
							<option value="binoculars">			&#xf1e5; Viewpoint				</option>
							<option value="thumb-tack">			&#xf08d; Point					</option>
						<optgroup label="Buildings">
							<option value="bus">				&#xf207; Public Transport 		</option>
							<option value="futbol-o">			&#xf1e3; Recreational			</option>
							<option value="paint-brush">		&#xf1fc; Paintshop 				</option>
							<option value="plug">				&#xf1e6; Energy					</option>
							<option value="anchor">				&#xf13d; Harbor					</option>
							<option value="automobile">			&#xf1b9; Automobile				</option>
							<option value="bank">				&#xf19c; Public					</option>
							<option value="beer">				&#xf0fc; Bar					</option>
							<option value="book">				&#xf02d; Library				</option>
							<option value="building-o">			&#xf0f7; Sky scraper			</option>
							<option value="camera">				&#xf030; Point of Interest		</option>
							<option value="coffee">				&#xf0f4; Café					</option>
							<option value="cutlery">			&#xf0f5; Restaurant				</option>
							<option value="envelope">			&#xf0e0; Post					</option>
							<option value="gavel">				&#xf0e3; Court					</option>
							<option value="fire-extinguisher">	&#xf134; Fire station			</option>
							<option value="flask">				&#xf0c3; Chemics				</option>
							<option value="graduation-cap">		&#xf19d; Education				</option>
							<option value="plane">				&#xf072; Airport				</option>
							<option value="wrench">				&#xf0ad; Workshop 				</option>
							<option value="home">				&#xf015; House					</option>
							<option value="plus-square">		&#xf0fe; Medical				</option>
							<option value="shopping-cart">		&#xf07a; Shop 					</option>
							<option value="bomb">				&#xf1e2; Armory					</option>
					</select>
				</td>
			</tr>
			<tr>
				<td>Visibility:</td>
				<td>
					<select id="visibility">
						<option value="private">Private</option>
						<option value="friends">Friends Only</option>
						<option value="public">Public</option>
					</select>
				</td>
			</tr>
			<tr>
				<td>Create:</td>
				<td><button id="create">Okay</button></td>
			</tr>
		</table>
	</script>
</head>
<body>
	<div class="stack">
	</div>
	<div id="map" style="width: 100%; height: 100%"></div>
	<div class="serverstats container">
		<div class="logout">
			<i class="fa fa-sign-out"></i>
		</div>
		<div>
			Time <span id="time"><img height="20" src="img/loading.gif" /></span>
		</div>
		<div>
			Players <span id="players"><img height="20" src="img/loading.gif" /></span>
		</div>
		<div>
			Zombies <span id="zombies"><img height="20" src="img/loading.gif" /></span>
		</div>
	</div>
	<div class="systemstats container">
		<div>
			FPS <span id="fps"><img height="20" src="img/loading.gif" /></span>
		</div>
		<div>
			Memory <span id="memory"><img height="20" src="img/loading.gif" /></span>
		</div>
		<div>
			Chunks <span id="chunks"><img height="20" src="img/loading.gif" /></span>
		</div>
		<div>
			Entities <span id="entities"><img height="20" src="img/loading.gif" /></span>
		</div>
		<div>
			Items <span id="items"><img height="20" src="img/loading.gif" /></span>
		</div>
	</div>
	<div class="players container" id="players">
		<table id="playerTable">
			<tr>
				<td>#</td>
				<td>Name</td>
				<td style="background: darkgrey;">x</td>
				<td style="background: darkgrey;">y</td>
				<td style="background: darkgrey;">z</td>
				<td>Deaths</td>
				<td>Health</td>
				<td>Kills</td>
				<td>Score</td>
				<td>Age</td>
				<td>Ping</td>
			</tr>
		</table>
		<div id="noplayers">
			No players connected.
		</div>
	</div>
	<div class="sidebar container">
		<h1>Known Players</h1>
		<div id="knownPlayers">

		</div>
		<h1>Friends</h1>
		<div id="friends">

		</div>
		<div class="handle">
			|||
		</div>
	</div>
	<script>
		$(function() {
			var sidebar;
			sidebar = $(".sidebar");
			sidebar.opened = false;
			sidebar.click(function() {
				if(sidebar.opened) {
					sidebar.css({"left" : "-190px"});
					sidebar.opened = false;
				}
				else {
					sidebar.css({"left" : "0px"});
					sidebar.opened = true;
				}
			});
		});
		$(".logout").click(function() {
			Login.logout(true);
		});

		$(window).on('beforeunload', function(){
			alert("bye");
			Login.logout(false);
		});

		Websocket.addOpenListener(function() {
			Login.checkLogin(function(okay) {
				if(!okay) {
					window.location.href = "index.html";
				}
			});
		});

		Map.init();
		//Websocket.init();
	</script>
</body>
</html>
